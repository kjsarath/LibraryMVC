@model LibraryMVC.Models.LibraryGetIssueDetails_Result 
@{
    ViewBag.Title = "New Book Issue";
    Layout = "~/Views/Shared/_mainLayout.cshtml";
}

<h2></h2>
@section Scripts {

    @Scripts.Render("~/bundles/jqueryui")
    @Styles.Render("~/Content/cssjqryUi")
    <link rel="stylesheet" href="//code.jquery.com/ui/1.11.2/themes/smoothness/jquery-ui.css">
    <script type="text/javascript">
     $(document).ready(function () {
         $('input[type=datetime]').datepicker({
             dateFormat: "dd/M/yy",
             changeMonth: true,
             changeYear: true,
             yearRange: "-60:+0"
         });

     });
     $(document).on('change', '#AccessionNo', function () {
         var stateId = $('#AccessionNo').val();
         $.ajax({
             url: '/Issue/FillWithAccessionNo',
             type: "GET",
             dataType: "JSON",
             data: { ID: stateId },
             success: function (books) {
                 $("#Title").val(books.TITLE);
                 $("#BookCode").val(books.BOOK_CODE);
             }
         });
     });
     $(document).on('change', '#BookCode', function () {
         var stateId = $('#BookCode').val();
         $.ajax({
             url: '/Issue/FillWithBookCode',
             type: "GET",
             dataType: "JSON",
             data: { ID: stateId },
             success: function (books) {
                 $("#Title").val(books.TITLE);
                 $("#AccessionNo").val(stateId);
             }
         });
     });
    </script>
    
}
@using (Html.BeginForm())
{
    @Html.AntiForgeryToken();
    <div style="font-family:Calibri ;font-size:10px">
        <table style="width:100%;">
            <tr>
                <td colspan="4" Style="text-align: right; font-family: Corbel; font-size: large;">
                    BOOK ISSUE - DETAILS
                    <hr />
                    @Html.ValidationSummary(true, "", new { @class = "text-danger" })
                    @Html.HiddenFor(model => model.ID)
                    @Html.HiddenFor(model => model.BookID )
                    @Html.HiddenFor(model=>model.MemberID )
                </td>
            </tr>
            <tr>
                <td colspan="4" class="SubHead">ISSUE DETAILS</td>
            </tr>
            <tr>
                <td class="tdStyle2" style="width:10%">Issue No</td>
                <td class="TextBoxTDBG3" style="width: 40%">
                    @Html.EditorFor(model => model.IssueNo , new { htmlAttributes = new { @class = "TextBoxTDBG4" } })
                    @Html.ValidationMessageFor(model => model.IssueNo, "", new { @class = "text-danger" })
                </td>
                <td style="width:10%"></td>
                <td style="width: 40%">
                    <span class="dxeBase_DevEx" id="Span15"></span>
                </td>
            </tr>
            <tr>
                <td class="tdStyle2" style="width:10%">Issued On</td>
                <td class="TextBoxTDBG3" style="width: 40%">
                    @Html.EditorFor(model => model.FromDate , new { htmlAttributes = new { @class = "TextBoxTDBG4" } })
                    @Html.ValidationMessageFor(model => model.FromDate, "", new { @class = "text-danger" })
                </td>
                <td style="width:10%"></td>
                <td style="width: 40%">
                    <span class="dxeBase_DevEx" id="Span15"></span>
                </td>
            </tr>
            <tr>
                <td class="tdStyle2" style="width:10%">Due Date</td>
                <td class="TextBoxTDBG3" style="width: 40%">
                    @Html.EditorFor(model => model.ToDate , new { htmlAttributes = new { @class = "TextBoxTDBG4" } })
                    @Html.ValidationMessageFor(model => model.ToDate, "", new { @class = "text-danger" })
                </td>
                <td class="tdStyle2" style="width:10%">No Of Days</td>
                <td class="TextBoxTDBG3" style="width: 40%">
                    @Html.EditorFor(model => model.NoOfDays , new { htmlAttributes = new { @class = "TextBoxTDBG4" } })
                    @Html.ValidationMessageFor(model => model.NoOfDays, "", new { @class = "text-danger" })
                </td>
            </tr>
            <tr>
                <td colspan="4" class="SubHead">MEMBER DETAILS</td>
            </tr>
            <tr>
                <td class="tdStyle2" style="width:10%">Member Code</td>
                <td class="TextBoxTDBG3" style="width: 40%">
                    @Html.EditorFor(model => model.AccountCode , new { htmlAttributes = new { @class = "TextBoxTDBG4" } })
                    @Html.ValidationMessageFor(model => model.AccountCode, "", new { @class = "text-danger" })
                </td>
                <td style="width:10%"></td>
                <td style="width: 40%">
                    <span class="dxeBase_DevEx" id="Span15"></span>
                </td>
            </tr>
            <tr>
                <td class="tdStyle2" style="width:10%">Name</td>
                <td class="TextBoxTDBG3" style="width: 40%">
                    @Html.EditorFor(model => model.AccountName , new { htmlAttributes = new { @class = "TextBoxTDBG4" } })
                    @Html.ValidationMessageFor(model => model.AccountName, "", new { @class = "text-danger" })
                </td>
                <td class="tdStyle2" style="width:10%">Category</td>
                <td class="TextBoxTDBG3" style="width: 40%">
                    @Html.EditorFor(model => model.Description , new { htmlAttributes = new { @class = "TextBoxTDBG4" } })
                    @Html.ValidationMessageFor(model => model.Description, "", new { @class = "text-danger" })
                </td>
            </tr>
            <tr>
                <td colspan="4" class="SubHead">BOOK DETAILS</td>
            </tr>
            <tr>
                <td class="tdStyle2" style="width:10%">Accession No</td>
                <td class="TextBoxTDBG3" style="width: 40%">
                    <span class="dxeBase_DevEx" id="Span5"></span>
                    @Html.DropDownListFor(model => model.AccessionNo,new SelectList((List<Tuple<string, int>>)ViewBag.AccessionList, "Item2","Item1"),"--Select--" , new {  @class = "TextBoxTDBG4",@ID = "AccessionNo"  })
                    @Html.ValidationMessageFor(model => model.AccessionNo, "", new { @class = "text-danger" })
                </td>
                <td style="width:10%"></td>
                <td style="width: 40%">
                    <span class="dxeBase_DevEx" id="Span15"></span>
                </td>
            </tr>
            <tr>
                <td class="tdStyle2" style="width:10%">Book Code</td>
                <td class="TextBoxTDBG3" style="width: 40%">
                    <span class="dxeBase_DevEx" id="Span7"></span>
                    @*@Html.DropDownListFor(model => model.BookCode, new SelectList((List<Tuple<string, int>>)ViewBag.BookCodeList, "Item2", "Item1"), "--Select--", new { @class = "TextBoxTDBG4", @ID = "BookCode" })*@
                    @Html.EditorFor(model => model.BookCode , new { htmlAttributes = new { @class = "TextBoxTDBG4", @ID = "BookCode" } })
                    @Html.ValidationMessageFor(model => model.BookCode, "", new { @class = "text-danger" })
                </td>
                <td class="tdStyle2" style="width:10%">Title</td>
                <td class="TextBoxTDBG3" style="width: 40%">
                    <span class="dxeBase_DevEx" id="Span7"></span>
                    @Html.EditorFor(model => model.Title , new { htmlAttributes = new { @class = "TextBoxTDBG4",@ID="Title" } })
                    @Html.ValidationMessageFor(model => model.Title, "", new { @class = "text-danger" })
                </td>
            </tr>
            <tr>
                <td class="tdStyle2" style="width:10%">Call No</td>
                <td class="TextBoxTDBG3" style="width: 40%">
                    <span class="dxeBase_DevEx" id="Span9"></span>
                    @Html.EditorFor(model => model.CallNo , new { htmlAttributes = new { @class = "TextBoxTDBG4" } })
                    @Html.ValidationMessageFor(model => model.CallNo, "", new { @class = "text-danger" })
                </td>

                <td class="tdStyle2" style="width:10%">Barcode</td>
                <td class="TextBoxTDBG3" style="width: 40%">
                    <span class="dxeBase_DevEx" id="Span10"></span>
                    @Html.EditorFor(model => model.Barcode, new { htmlAttributes = new { @class = "TextBoxTDBG4" } })
                    @Html.ValidationMessageFor(model => model.Barcode, "", new { @class = "text-danger" })
                </td>
            </tr>
        </table>
    </div>
    <script type="text/javascript" >
        
    </script>
    <br />
    <form method="post">
        <div class="form-group">
            <div style="text-align: left">
                <input type="submit" name="action:Save" value="Save" class="btn btn-success " />
                <input type="submit" name="action:Back" value="Cancel" class="btn btn-danger" />
            </div>
        </div>
        <div style="text-align: left">
            <input type="submit" name="action:Back" value="Back To List" class="btn btn-primary " />
        </div>
    </form>
                        }
